<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.paint.LinearGradient?>
<?import javafx.scene.paint.Stop?>
<?import javafx.scene.paint.CycleMethod?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.effect.BlurType?>

<BorderPane xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.ewallet.gui.controllers.ClientDashboardController"
            prefWidth="1200" prefHeight="800"
            style="-fx-background-color: #f5f7fa;">

    <!-- TOP: Header avec gradient et ombre -->
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #1a237e, #283593);">
            <HBox spacing="20" alignment="CENTER_LEFT" style="-fx-padding: 20;">
                <!-- Logo/Title -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Rectangle width="40" height="40" arcWidth="10" arcHeight="10" 
                               fill="linear-gradient(to bottom right, #ffffff, #bbdefb)"
                               stroke="#3949ab" strokeWidth="1.5">
                        <effect>
                            <DropShadow color="rgba(0,0,0,0.3)" radius="5" offsetX="2" offsetY="2"/>
                        </effect>
                    </Rectangle> 
                    <VBox spacing="2">
                        <Label text="E-Wallet Pro" 
                               style="-fx-text-fill: white; -fx-font-size: 22px; -fx-font-weight: 900; -fx-font-family: 'Segoe UI';"/>
                        <Label text="Client Dashboard" 
                               style="-fx-text-fill: #bbdefb; -fx-font-size: 13px; -fx-font-weight: 300;"/>
                    </VBox>
                </HBox>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- User Info -->
                <HBox spacing="15" alignment="CENTER">
                    <VBox spacing="2" alignment="CENTER_RIGHT">
                        <Label fx:id="welcomeLabel" 
                               style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: 600;"/>
                        <Label fx:id="balanceLabel" 
                               style="-fx-text-fill: #ffd54f; -fx-font-size: 16px; -fx-font-weight: 800; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 2, 0.5, 1, 1);"/>
                    </VBox>
                    <Button fx:id="quickProfileBtn" 
                            text="ðŸ‘¤"
                            onAction="#handleQuickProfile"
                            style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 18px; -fx-min-width: 40; -fx-min-height: 40; -fx-background-radius: 20; -fx-border-color: rgba(255,255,255,0.3); -fx-border-width: 1; -fx-border-radius: 20; -fx-cursor: hand;">
                        <tooltip>
                            <Tooltip text="Menu rapide"/>
                        </tooltip>
                    </Button>
                </HBox>
            </HBox>
            
            <!-- Status Bar -->
            <HBox style="-fx-background-color: rgba(0,0,0,0.1); -fx-padding: 8 20;" 
                  spacing="20" alignment="CENTER_LEFT">
                <Label text="ðŸŸ¢ ConnectÃ©" 
                       style="-fx-text-fill: #a5d6a7; -fx-font-size: 12px; -fx-font-weight: 600;"/>
                <Label text="ðŸ“± Version 2.1.0" 
                       style="-fx-text-fill: #bbdefb; -fx-font-size: 12px;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="lastLoginLabel" 
                       text="DerniÃ¨re connexion: --" 
                       style="-fx-text-fill: #bbdefb; -fx-font-size: 12px;"/>
            </HBox>
        </VBox>
    </top>

    <!-- LEFT: Navigation Sidebar -->
    <left>
        <VBox spacing="2" style="-fx-background-color: #ffffff; -fx-border-color: #e0e0e0; -fx-border-width: 0 1 0 0;">
            <padding>
                <Insets top="25" right="0" bottom="25" left="0"/>
            </padding>
            
            <!-- Menu Items -->
            <VBox spacing="2" style="-fx-padding: 0 15;">
                <!-- Dashboard -->
                <Button fx:id="dashboardButton" 
                        onAction="#handleDashboard"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ“Š" style="-fx-font-size: 16px;"/>
                            <Label text="Tableau de Bord" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Transfer -->
                <Button fx:id="transferButton" 
                        onAction="#handleTransfer"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ’¸" style="-fx-font-size: 16px;"/>
                            <Label text="TransfÃ©rer" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Services -->
                <Button fx:id="servicesButton" 
                        onAction="#handleServices"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ¦" style="-fx-font-size: 16px;"/>
                            <Label text="Paiements Services" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- History -->
                <Button fx:id="historyButton" 
                        onAction="#handleHistory"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ“ˆ" style="-fx-font-size: 16px;"/>
                            <Label text="Historique" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Notifications -->
                <Button fx:id="notificationsButton" 
                        onAction="#handleNotifications"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        
                    </graphic>
                </Button>
                
                <Separator style="-fx-background-color: #f0f0f0; -fx-padding: 10 0;"/>
                
                <!-- Profile -->
                <Button fx:id="profileButton" 
                        onAction="#handleProfile"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ‘¤" style="-fx-font-size: 16px;"/>
                            <Label text="Mon Profil" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Security -->
                <Button fx:id="changePasswordButton" 
                        onAction="#handleSecurity"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="ðŸ”’" style="-fx-font-size: 16px;"/>
                            <Label text="SÃ©curitÃ©" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Help -->
                <Button fx:id="helpButton" 
                        onAction="#handleHelp"
                        style="-fx-background-color: transparent; -fx-text-fill: #546e7a; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 0;"
                        maxWidth="Infinity">
                    <graphic>
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="â“" style="-fx-font-size: 16px;"/>
                            <Label text="Aide &amp; Support" style="-fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                
                <Region VBox.vgrow="ALWAYS"/>
                
                <!-- Logout -->
                <VBox spacing="5" style="-fx-padding: 20 15 0 15;">
                    <Separator style="-fx-background-color: #f0f0f0;"/>
                    <Button fx:id="logoutButton" 
                            onAction="#handleLogout"
                            style="-fx-background-color: #f5f5f5; -fx-text-fill: #d32f2f; -fx-font-size: 14px; -fx-font-weight: 600; -fx-alignment: CENTER_LEFT; -fx-padding: 15 20; -fx-background-radius: 8; -fx-border-color: #ffcdd2; -fx-border-width: 1; -fx-border-radius: 8; -fx-cursor: hand;"
                            maxWidth="Infinity">
                        <graphic>
                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label text="ðŸšª" style="-fx-font-size: 16px;"/>
                                <Label text="DÃ©connexion" style="-fx-font-size: 14px;"/>
                            </HBox>
                        </graphic>
                    </Button>
                </VBox>
            </VBox>
        </VBox>
    </left>

    <!-- CENTER: Main Content Area -->
    <center>
        <StackPane fx:id="mainContentContainer" style="-fx-padding: 25;">
            <VBox fx:id="mainContent" spacing="0" alignment="TOP_CENTER"/>
        </StackPane>
    </center>

    <!-- BOTTOM: Status Footer -->
    <bottom>
        <HBox style="-fx-background-color: #ffffff; -fx-border-color: #e0e0e0; -fx-border-width: 1 0 0 0;" 
              alignment="CENTER" spacing="20">
            <padding>
                <Insets top="12" right="25" bottom="12" left="25"/>
            </padding>
            
            <Label text="Â© 2024 E-Wallet Pro v2.1" 
                   style="-fx-text-fill: #78909c; -fx-font-size: 11px;"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <HBox spacing="15">
                <Label text="ðŸ”’ Connexion sÃ©curisÃ©e SSL" 
                       style="-fx-text-fill: #4caf50; -fx-font-size: 11px; -fx-font-weight: 600;"/>
                <Label text="ðŸ“ž Support: 24h/24" 
                       style="-fx-text-fill: #78909c; -fx-font-size: 11px;"/>
            </HBox>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Label fx:id="connectionStatus" text="ðŸŸ¢ En ligne" 
                   style="-fx-text-fill: #4caf50; -fx-font-size: 11px; -fx-font-weight: 600;"/>
        </HBox>
    </bottom>

</BorderPane>
